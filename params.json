{"name":"Pentest-env","tagline":"Pentest environment (kali linux) deployer using vagrant and chef.","body":"# Pentest Environment Deployment\r\n\r\nThis tool provide an easy way to deploy a clean pentesting environment with Kali linux using vagrant and virtualbox.\r\n\r\n## Requirements\r\nI assume you are familiar with virtualbox and vagrant.\r\n- https://www.virtualbox.org/\r\n- http://www.vagrantup.com/\r\n\r\nTested with:\r\n- Virtualbox (4.3.20)\r\n- Vagrant (1.7.1)\r\n\r\n\r\n## About boxes\r\n### Boxes URL\r\n- Kali linux 1.0: http://ftp.sliim-projects.eu/boxes/kali-linux-1.0-amd64.box\r\n  + VirtualBox 4.2.10\r\n  + Vagrant 1.0.7\r\n- Kali linux 1.0.4: http://ftp.sliim-projects.eu/boxes/kali-linux-1.0.4-amd64.box\r\n  + VirtualBox 4.2.16\r\n  + Vagrant 1.2.7\r\n\r\n\r\n### Changes details\r\nProvided boxes are fresh install of Kali linux with some changes:\r\n\r\n#### Kali linux 1.0\r\n - Installation of linux kernel headers for vbox guest additions.\r\n - Installation of virtualbox guest additions.\r\n - Installation of `chef` package for provisioning.\r\n - `vagrant` user was created for provisionning (Password: `tnargav`).\r\n - `admin` group don't require password for sudo.\r\n - `vagrant` user is in `admin` group.\r\n - Authorized keys for `vagrant` user are stored in `ssh-keys/` directory (no passphrase).\r\n - Enabling rpcbind, nfs-common and ssh services at boot.\r\n\r\n\r\n#### Kali linux 1.0.4\r\nFresh install from http://cdimage.kali.org/kali-latest/amd64/kali-linux-1.0.4-amd64-mini.iso\r\n\r\n - Installation of linux kernel headers for vbox guest additions.\r\n - Installation of virtualbox guest additions.\r\n - Installation of `chef` package for provisioning.\r\n - Authorized keys for `root` user are stored in `ssh-keys/` directory (no passphrase).\r\n - Enabling rpcbind, nfs-common and ssh services at boot.\r\n - Modified /etc/issue for vagrant os detection.\r\n - MAC address for private network was added in /etc/NetworkManager/NetworkManager.conf to disable auto connect.\r\n\r\n**Please don't forget to read security warning below !**\r\n\r\n\r\n## Installation\r\nYou will need rake and berkshelf for vm provisionning, you can install it with rubygems:\r\n```\r\ngem install rake berkshelf\r\n```\r\n\r\nClone pentest-env repository:\r\n```\r\ngit clone https://github.com/Sliim/pentest-env.git\r\n```\r\n\r\nInstall cookbooks dependencies:\r\n```\r\nrake\r\n```\r\n\r\n\r\n## Usage\r\n### Running Kali linux\r\nPentest-env works with Vagrant, so all you need to know is to use basic vagrant features :)\r\nTo run kali instance:\r\n```\r\nvagrant up kali\r\n```\r\n\r\n\r\n### Pentest-env customizations\r\nSince Pentest-env 0.5.0, customizations are stored in `$HOME/.pentestrc` file as YAML format.\r\nAn example of configuration file is available at the root of this repository named `pentestrc.example`\r\n\r\nYou can copy and edit it for your needs:\r\n```\r\ncp pentestrc.example ~/.pentestrc\r\n```\r\n\r\nHere is a minimal configuration:\r\n```\r\nscripts_path: ~/.pentest.d/scripts\r\ntargets_path: ~/.pentest.d/targets\r\ntargets: []\r\n```\r\n\r\nThis setup set your `scripts` and `targets` directories used by pentest-env.\r\nIt also set an empty target list.. if you just want to run a Kali instance..\r\n\r\n\r\n#### Kali linux customizations\r\nYou can perform many customizations on kali linux instance.\r\nJust add `kali` key in your `$HOME/.pentestrc`, below the availables customizations:\r\n- `packages` - An array of apt packages to install\r\n- `commands` - List of command to run as inline shell script\r\n- `scripts` - List of scripts to execute. They must be located in `scripts_path` directory\r\n- `synced_folders` - Hash for forlders to sync with the instance\r\n\r\nExample:\r\n```\r\nkali:\r\n  packages: [git-core]\r\n  commands:\r\n  - curl https://opscode-omnibus-packages.s3.amazonaws.com/debian/6/x86_64/chef_12.0.3-1_amd64.deb -o chef.deb && sudo dpkg -i chef.deb\r\n  scripts: [openvas.sh]\r\n  synced_folders: {data: /pentest}\r\n```\r\n\r\n\r\n#### Targets customization\r\nYou can easily deploy targets with your kali instance.\r\nPentest-env comes with some targets ready to use:\r\n- `dvwa` - DVWA (Damn Vulnerable Web Application) - http://www.dvwa.co.uk/\r\n- `vicnum` - OWASP Vicnum - https://www.owasp.org/index.php/Category:OWASP_Vicnum_Project\r\n- `gruyere` - Google Gruyere - http://google-gruyere.appspot.com/\r\n- `bricks` - OWASP Bricks - https://www.owasp.org/index.php/OWASP_Bricks\r\n- `webgoat` - OWASP WebGoat - https://www.owasp.org/index.php/Category:OWASP_WebGoat_Project\r\n\r\nTo setup targets to deploy, edit your `$HOME/.pentestrc` and set the `targets` list:\r\n\r\n```\r\ntargets: [dvwa vicnum]\r\n```\r\n\r\nYou can add your own targets in your `targets_path` directory and use them in your `targets` list.\r\n\r\nTargets instance can be customized same as the kali instance, use the target's name as a key in your configuration file to customize the targets:\r\n```\r\ndvwa:\r\n  packages: [git-core]\r\nvicnum:\r\n  packages: [git-core]\r\n```\r\n\r\n\r\n## Known issues\r\n### Hostonly on kali linux 1.0 fail\r\nHostonly connection will be reset at first vm creation.\r\nTo resolve this, disconnect connection in gui mode and run in your vagrant directory:\r\n```\r\nvagrant reload kali\r\n```\r\n\r\n\r\n## Security warning\r\n### Kali linux 1.0\r\nVirtual machine boot with sshd service running and may cause some security issues:\r\n  - Bridged network is enabled by default.\r\n  - Default root password of this box is insecure (toor).\r\n  - Vagrant user is insecure\r\n    + Private key stored in `ssh-keys/`.\r\n    + Password known (`tnargav`).\r\n    + User in sudoers with no password required.\r\n\r\n\r\n### Kali linux 1.0.4\r\nVirtual machine boot with sshd service running and may cause some security issues:\r\n  - Bridged network is enabled by default.\r\n  - Default root password of this box is insecure (toor).\r\n\r\n\r\n## License\r\n   See COPYING file\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}