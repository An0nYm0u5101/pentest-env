# This source file is part of pentest-env.
#
# pentest-env is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# pentest-env is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along
# with pentest-env. If not, see <http://www.gnu.org/licenses/gpl-3.0.html>.

require File.expand_path('target', File.dirname(__FILE__))

class Pentestenv
  class Customization
    def initialize(path, config)
      if ! Dir.exists?(path)
        raise ArgumentError, "Customizations path doesn\'t exists."
      end
      @config = config
      @path   = path
    end

    def targets
      if File.exists?(@path + "/targets")
        File.open(@path + "/targets").each do | t |
          target = Pentestenv::Target.new(@config, t.chomp)
          target.deploy
        end
      end
    end
  end
end
