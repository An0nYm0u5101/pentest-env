class Pentestenv
  class Target
    def initialize(vagrant_config, target_name)
      if ! File.exists?("targets/" + target_name + ".rb")
        raise ArgumentError, "Specified target `" + target_name + "` is not available."
      end

      if ! cookbook_available?(target_name)
        raise ArgumentError, "No cookbook found for " + target_name + " target"
      end

      @config = vagrant_config
      @name   = target_name
    end

    def deploy
      require File.expand_path('targets/' + @name)
      target(@config)
    end

    private

    def cookbook_available?(name)
      Dir.exists?("cookbooks/" + name)
    end

  end
end
